---
# Source: oes/templates/configmaps/oes-ui-nginxconf.yaml
apiVersion: v1
data:
  nginx.conf: "# For more information on configuration, see:\n#   * Official English
    Documentation: http://nginx.org/en/docs/\n#   * Official Russian Documentation:
    http://nginx.org/ru/docs/\n\nuser nginx;\nworker_processes auto;\nerror_log /var/log/nginx/error.log
    debug;\npid /tmp/nginx.pid;\n\n# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.\ninclude
    /usr/share/nginx/modules/*.conf;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp
    {\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\"
    '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\"
    \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n
    \   sendfile            on;\n    tcp_nopush          on;\n    tcp_nodelay         on;\n
    \   keepalive_timeout   65;\n    types_hash_max_size 2048;\n\n    include             /etc/nginx/mime.types;\n
    \   default_type        application/octet-stream;\n\n    # Load modular configuration
    files from the /etc/nginx/conf.d directory.\n    # See http://nginx.org/en/docs/ngx_core_module.html#include\n
    \   # for more information.\n    include /etc/nginx/conf.d/*.conf;\n\n    server
    {\n        listen       8080 default_server;\n        #listen       [::]:8080 default_server;\n
    \       server_name  _;\n        root /var/www/html;\n\n        # Load configuration
    files for the default server block.\n        include /etc/nginx/default.d/*.conf;\n\n
    \       location ^~ /deck/gate/ {\n          proxy_pass http://oes-gate:8084/ ;\n
    \         proxy_set_header Host $host;\n        }\n\n        location ^~ /deck {\n
    \         proxy_pass http://spin-deck:9000/ ;\n          proxy_set_header Host $host;\n
    \       }\n\n        location ^~ /plugin-manifest.json {\n          proxy_pass http://spin-deck:9000
    ;\n        }\n\n        location ^~ /gate/ {\n          proxy_pass http://oes-gate:8084/
    ;\n          proxy_set_header Host $host;\n        }\n       \n        location
    ^~ /ui {\n          try_files $uri $uri/ /ui/index.html;\n          proxy_set_header
    Host $host;\n        }\n\n        # Go to Gate if you don't know what to do\n        location
    / {\n          proxy_pass http://oes-gate:8084/ ;\n          proxy_set_header Host
    $host;\n        }\n\n    }\n}\n"

kind: ConfigMap
metadata:
  name: oes-ui-nginxconf
  labels:
    app: oes
    component: ui
    heritage: "Helm"
    release: "release-name"
    chart: "oes-4.0.19"
