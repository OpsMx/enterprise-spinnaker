---
# Source: oes/templates/configmaps/oes-sapor-configmap.yaml
apiVersion: v1
data:
  application.yml: |
    oes:
      rbac:
        enabled: true
    spinnaker:
      authnEnabled: true
      baseurl: http://spin-gate:8084
      externalBaseUrl: http://{{ .Values.spinnaker.ingressGate.host }}
      ldap:
        enabled: true
        username: admin
        password: opsmxadmin123
        adminLoginEnabled: false
        adminUsername: admin
        adminPassword: admin
      x509:
        enabled: false
        client:
          file: /opt/opsmx/client.p12
          password: changeit
    spring:
      datasource:
        url: jdbc:postgresql://oes-db:5432/oesdb
        username: postgres
        password: networks123
    datasources:
      platform: true
      
    ## Set the below field to true if agent for kubernetes
    kubernetes:
      agent:
        enabled: true 
        serverHostName: controller-agent.testing.opsmx.com
        serverPort: 9003
        caCertfile: /opt/opsmx/controller/ca.crt
        certFile: /opt/opsmx/controller/cert/tls.crt
        keyFile: /opt/opsmx/controller/cert/tls.key
        image: quay.io/opsmxpublic/forwarder-agent:v20210118T161303
      template:
        path: /opt/opsmx/controller
        kubectlTemplateFileName: kubeconfig.template
        manifestTemplateFileName: deploy-agent.template
    
  client.p12: |
    
kind: ConfigMap
metadata:
  name: oes-sapor-config
  labels:
    app: oes
    component: sapor
    heritage: "Helm"
    release: "RELEASE-NAME"
    chart: "oes-3.5.0"
